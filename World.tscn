[gd_scene load_steps=16 format=3 uid="uid://dkbxk7rn3h0lv"]

[ext_resource type="Script" path="res://World.gd" id="1_061dn"]
[ext_resource type="PackedScene" uid="uid://ba07kn2ollll2" path="res://fow_light.tscn" id="1_tluii"]
[ext_resource type="Texture2D" uid="uid://rub6n76ut5y1" path="res://flame.png" id="2_l3ldu"]
[ext_resource type="Script" path="res://game_camera.gd" id="4_nn4n2"]
[ext_resource type="Texture2D" uid="uid://i0ccxwtbe6nw" path="res://icon.png" id="5_lmstc"]

[sub_resource type="Gradient" id="Gradient_ugsfr"]
colors = PackedColorArray(0, 1, 1, 1, 1, 0, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_1gpru"]
gradient = SubResource("Gradient_ugsfr")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_11rig"]
polygon = PackedVector2Array(361, 211, 340, 199, 333.931, 184.529, 327, 168, 324, 143, 336, 130, 345, 118, 377, 95, 399, 87, 424, 85, 446, 88, 470, 95, 497, 110, 520, 126, 524, 139, 522, 151, 511, 155, 501, 147, 486, 133, 462, 118, 435, 114, 414, 110, 387, 116, 365, 128, 349, 147, 350, 166, 359, 183, 374, 190, 399, 190, 421, 189, 437, 192, 442, 196, 444, 203, 439, 209, 420, 212, 392, 214)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_akmf6"]
polygon = PackedVector2Array(411, 132, 429, 133, 444, 140, 448, 149, 449, 159, 445, 167, 431, 172, 420, 174, 404, 172, 394, 163, 395, 151, 399, 138)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_vknc2"]
polygon = PackedVector2Array(596, 219, 645, 219, 645, 163, 669, 163, 669, 218, 693, 170, 710, 180, 686, 228, 734, 228, 734, 245, 685, 245, 685, 282, 702, 281, 702, 260, 746, 260, 746, 212, 712, 212, 733, 171, 687, 149, 680, 169, 679, 137, 628, 138, 628, 197, 583, 197)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_4fw6e"]
polygon = PackedVector2Array(424, 234, 467, 234, 488, 238, 488, 303, 467, 302, 469, 253, 422, 252)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_yotku"]
polygon = PackedVector2Array(536, 340, 500, 352, 477, 361, 464, 375, 444, 397, 425, 403, 411, 405, 396, 401, 383, 394, 362, 395, 355, 404, 349, 432, 368, 448, 387, 463, 420, 471, 441, 468, 444, 454, 436, 445, 427, 436, 431, 427, 449, 418, 460, 415, 478, 411, 492, 399, 498, 388, 504, 383, 510, 377, 523, 371, 538, 366, 553, 363, 565, 367, 549, 376, 538, 381, 524, 390, 511, 401, 497, 412, 490, 420, 471, 427, 456, 431, 453, 441, 457, 453, 459, 462, 449, 475, 433, 481, 414, 481, 393, 478, 373, 475, 357, 463, 341, 446, 336, 416, 339, 386, 358, 380, 383, 383, 417, 387, 444, 378, 458, 361, 492, 339, 528, 324, 584, 313, 609, 312, 635, 311, 674, 308, 714, 308, 736, 309, 765, 311, 784, 315, 777, 327, 755, 330, 713, 331, 673, 333, 643, 336, 605, 338, 572, 341)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_2ktcr"]
polygon = PackedVector2Array(21, 288, 71, 285, 106, 292, 140, 320, 157, 351, 157, 384, 148, 411, 130, 435, 99, 451, 105, 430, 115, 402, 115, 366, 100, 338, 77, 318, 47, 302)

[sub_resource type="Gradient" id="Gradient_rjheq"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(0, 0, 0, 0.760784)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_73c63"]
gradient = SubResource("Gradient_rjheq")
width = 960
height = 540

[node name="World" type="Node2D"]
script = ExtResource("1_061dn")

[node name="OtherStuff" type="TextureRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 960.0
offset_bottom = 540.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_1gpru")
expand_mode = 3

[node name="LightOccluders" type="Node" parent="OtherStuff"]

[node name="LightOccluder2D" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
position = Vector2(-176, -5.99998)
occluder = SubResource("OccluderPolygon2D_11rig")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
position = Vector2(-176, -5.99998)
occluder = SubResource("OccluderPolygon2D_akmf6")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
position = Vector2(-31, -34)
occluder = SubResource("OccluderPolygon2D_vknc2")

[node name="LightOccluder2D4" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
position = Vector2(145, -28)
occluder = SubResource("OccluderPolygon2D_4fw6e")

[node name="LightOccluder2D5" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
position = Vector2(110, 1)
occluder = SubResource("OccluderPolygon2D_yotku")

[node name="LightOccluder2D6" type="LightOccluder2D" parent="OtherStuff/LightOccluders" groups=["LightOccluders"]]
occluder = SubResource("OccluderPolygon2D_2ktcr")

[node name="Sprite2D" type="Sprite2D" parent="OtherStuff"]
position = Vector2(200, 142)
scale = Vector2(0.3125, 0.3125)
texture = ExtResource("5_lmstc")

[node name="Sprite2D2" type="Sprite2D" parent="OtherStuff"]
position = Vector2(663, 151)
scale = Vector2(0.196797, 0.196797)
texture = ExtResource("5_lmstc")

[node name="Sprite2D3" type="Sprite2D" parent="OtherStuff"]
position = Vector2(34.34, 334.66)
scale = Vector2(0.426875, 0.426875)
texture = ExtResource("5_lmstc")

[node name="Sprite2D4" type="Sprite2D" parent="OtherStuff"]
position = Vector2(599, 241)
scale = Vector2(0.275004, 0.275004)
texture = ExtResource("5_lmstc")

[node name="Sprite2D5" type="Sprite2D" parent="OtherStuff"]
position = Vector2(500, 433)
scale = Vector2(0.275004, 0.275004)
texture = ExtResource("5_lmstc")

[node name="FOW" parent="OtherStuff" node_paths=PackedStringArray("light", "light_occluders", "game_camera") instance=ExtResource("1_tluii")]
layout_mode = 1
expand_mode = 3
fog_texture = SubResource("GradientTexture2D_73c63")
light = NodePath("../Light")
light_occluders = NodePath("../LightOccluders")
fog_scroll_velocity = Vector2(0, 0)
game_camera = NodePath("../Light/Camera2D")

[node name="Light" type="PointLight2D" parent="OtherStuff"]
position = Vector2(291.554, 40.8915)
scale = Vector2(0.771484, 0.800781)
range_item_cull_mask = 3
shadow_enabled = true
shadow_filter = 1
shadow_filter_smooth = 2.4
shadow_item_cull_mask = 3
texture = ExtResource("2_l3ldu")
texture_scale = 10.0

[node name="Camera2D" type="Camera2D" parent="OtherStuff/Light"]
limit_left = 0
limit_top = 0
limit_right = 960
limit_bottom = 540
position_smoothing_speed = 3.0
editor_draw_limits = true
editor_draw_drag_margin = true
script = ExtResource("4_nn4n2")

[connection signal="on_light_moved" from="." to="OtherStuff/FOW" method="on_light_moved"]
