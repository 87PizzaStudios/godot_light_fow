[gd_scene load_steps=12 format=3 uid="uid://dkbxk7rn3h0lv"]

[ext_resource type="Script" path="res://World.gd" id="1_061dn"]
[ext_resource type="PackedScene" uid="uid://ba07kn2ollll2" path="res://fow_light.tscn" id="1_tluii"]
[ext_resource type="Texture2D" uid="uid://rub6n76ut5y1" path="res://flame.png" id="2_l3ldu"]
[ext_resource type="Texture2D" uid="uid://hjrwvmx7pbb6" path="res://test_fog.png" id="5_e50fj"]
[ext_resource type="Texture2D" uid="uid://i0ccxwtbe6nw" path="res://icon.png" id="5_lmstc"]

[sub_resource type="Gradient" id="Gradient_ugsfr"]
colors = PackedColorArray(0, 1, 1, 1, 1, 0, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_1gpru"]
gradient = SubResource("Gradient_ugsfr")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_11rig"]
polygon = PackedVector2Array(361, 211, 340, 199, 333.931, 184.529, 327, 168, 324, 143, 336, 130, 345, 118, 377, 95, 399, 87, 424, 85, 446, 88, 470, 95, 497, 110, 520, 126, 524, 139, 522, 151, 511, 155, 501, 147, 486, 133, 462, 118, 435, 114, 414, 110, 387, 116, 365, 128, 349, 147, 350, 166, 359, 183, 374, 190, 399, 190, 421, 189, 437, 192, 442, 196, 444, 203, 439, 209, 420, 212, 392, 214)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_akmf6"]
polygon = PackedVector2Array(411, 132, 429, 133, 444, 140, 448, 149, 449, 159, 445, 167, 431, 172, 420, 174, 404, 172, 394, 163, 395, 151, 399, 138)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_vknc2"]
polygon = PackedVector2Array(596, 219, 645, 219, 645, 163, 669, 163, 669, 218, 693, 170, 710, 180, 686, 228, 734, 228, 734, 245, 685, 245, 685, 282, 702, 281, 702, 260, 746, 260, 746, 212, 712, 212, 733, 171, 687, 149, 680, 169, 679, 137, 628, 138, 628, 197, 583, 197)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_4fw6e"]
polygon = PackedVector2Array(424, 234, 467, 234, 488, 238, 488, 303, 467, 302, 469, 253, 422, 252)

[node name="World" type="Control"]
clip_contents = true
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_061dn")

[node name="OtherStuff" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_1gpru")
expand_mode = 3

[node name="LightOccluders" type="Node" parent="OtherStuff"]

[node name="LightOccluder2D" type="LightOccluder2D" parent="OtherStuff/LightOccluders"]
position = Vector2(-176, -5.99998)
occluder = SubResource("OccluderPolygon2D_11rig")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="OtherStuff/LightOccluders"]
position = Vector2(-176, -5.99998)
occluder = SubResource("OccluderPolygon2D_akmf6")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="OtherStuff/LightOccluders"]
position = Vector2(-176, -5.99998)
occluder = SubResource("OccluderPolygon2D_vknc2")

[node name="LightOccluder2D4" type="LightOccluder2D" parent="OtherStuff/LightOccluders"]
occluder = SubResource("OccluderPolygon2D_4fw6e")

[node name="Sprite2D" type="Sprite2D" parent="OtherStuff"]
position = Vector2(200, 142)
scale = Vector2(0.3125, 0.3125)
texture = ExtResource("5_lmstc")

[node name="Sprite2D2" type="Sprite2D" parent="OtherStuff"]
position = Vector2(518, 179)
scale = Vector2(0.196797, 0.196797)
texture = ExtResource("5_lmstc")

[node name="Sprite2D3" type="Sprite2D" parent="OtherStuff"]
position = Vector2(34.34, 334.66)
scale = Vector2(0.426875, 0.426875)
texture = ExtResource("5_lmstc")

[node name="Sprite2D4" type="Sprite2D" parent="OtherStuff"]
position = Vector2(454, 269)
scale = Vector2(0.275004, 0.275004)
texture = ExtResource("5_lmstc")

[node name="Light" type="PointLight2D" parent="OtherStuff"]
position = Vector2(291.554, 40.8915)
scale = Vector2(0.771484, 0.800781)
range_item_cull_mask = 3
shadow_enabled = true
shadow_filter = 1
shadow_filter_smooth = 2.4
shadow_item_cull_mask = 3
texture = ExtResource("2_l3ldu")
texture_scale = 10.0

[node name="FOW" parent="." node_paths=PackedStringArray("light", "light_occluders") instance=ExtResource("1_tluii")]
layout_mode = 1
fog_texture = ExtResource("5_e50fj")
light = NodePath("../OtherStuff/Light")
light_occluders = NodePath("../OtherStuff/LightOccluders")
fog_scroll_velocity = Vector2(0.01, -0.03)

[connection signal="on_light_moved" from="." to="FOW" method="on_light_moved"]
